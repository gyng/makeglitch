<!DOCTYPE html>
<html>
  <head>
    <title>ＭＡＫＥＧＬＩＴＣＨ</title>
    <meta charset="UTF-8">
  </head>
  <body>
    <center>
      <h1>ＭＡＫＥＧＬＩＴＣＨ</h1>
      <hr>

      <p>ＤＥＭＯ／ＢＯＯＫＭＡＲＫＬＥＴ</p>

      <strong>
      <a href="
javascript: (function() {
  const transformTranspose = (header, input) => {
    const idx =
      header + Math.floor(Math.random() * (input.length - header - 1));
    const tmp = input[idx];
    input[idx] = input[idx + 1];
    input[idx + 1] = tmp;
    return input;
  };

  const transformSubstitute = (header, input) => {
    const by = Math.floor(Math.random() * 256);
    const idx = header + Math.floor(Math.random() * (input.length - header));
    input[idx] = by;
    return input;
  };

  const glitchImage = image => {
    try {
      image.onload = () => {};

      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');

      canvas.width = image.naturalWidth;
      canvas.height = image.naturalHeight;

      context.drawImage(image, 0, 0);

      const data = canvas.toBlob(blob => {
        const fileReader = new FileReader();
        fileReader.onload = event => {
          const data =
            blob.size === event.target.result.byteLength
              ? new Uint8Array(event.target.result)
              : null;

          image.onerror = () => {
            image.src = URL.createObjectURL(blob);
          };

          const glitchOnce = () => {
            const errors = Math.random() * 10;
            let corrupted = data.slice(0);
            for (let i = 0; i < errors; i++) {
              corrupted = Math.random() > 0.5 ? transformTranspose(100, corrupted) : transformSubstitute(100, corrupted);
            }

            const corruptBlob = new Blob([corrupted], { type: 'image/png' });
            const corruptSrc = URL.createObjectURL(corruptBlob);

            image.src = corruptSrc;
          };

          const glitchTimeout = (max = 300) => {
            glitchOnce();
            window.setTimeout(() => {
              glitchTimeout(max);
            }, Math.random() * max / 2 + Math.random() * max / 2);
          };

          glitchTimeout();
        };
        fileReader.readAsArrayBuffer(blob);
      }, 'image/jpeg');
    } catch (e) {
      return false;
    }
  };

  const images = document.querySelectorAll('img');
  images.forEach(i => {
    i.complete
      ? glitchImage(i)
      : (i.onload = event => glitchImage(event.target));
  });
})();
      ">
        ＧＬＩＴＣＨ
      </a>
      </strong>

      <p>ＳＣＲＥＥＮ　ＳＨＯＴ</p>
      <div>
        <img src="doc/demo1.jpg" style="max-width: 30%"></img>
        <img src="doc/demo2.jpg" style="max-width: 30%"></img>
        <img src="doc/demo3.jpg" style="max-width: 30%"></img>
      </div>

      <p>※ＵＬＴＲＡ　ＧＲＡＰＨＩＣＳ　ＲＥＱＵＩＲＥＳ　Ａ　ＧＯＯＤ　ＢＬＩＴＴＥＲ　＆　ＦＵＮＣＴＩＯＮＩＮＧ　ＩＮＴＥＲＮＥＴ　ＣＯＮＮＥＣＴＩＯＮ　（２４００　ＢＡＵＤ　ＷＡＲＮＩＮＧ）</p>
      <p>※ＣＯＮＴＥＮＴ　ＳＥＣＵＲＩＴＹ　ＰＯＬＩＣＹ　ＭＡＹ　ＢＬＯＣＫ　ＳＣＲＩＰＴ　ＦＲＯＭ　ＲＵＮＮＩＮＧ</p>
      <p><a href="https://github.com/gyng/makeglitch">※ＧＩＴＨＵＢ　ＰＲＯＪＥＣＴ　ＰＡＧＥ</a></p>
      <p><a href="https://gyng.github.io/maketerm/">※ＡＬＳＯ，　ＣＨＥＣＫ　ＯＵＴ　ＭＡＫＥＴＥＲＭ！</a></p>
    </center>
  </body>
</html>